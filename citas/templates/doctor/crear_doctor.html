
<div class="modal-dialog modal-dialog-scrollable"   role="document">
    <div class="modal-content">
        <header class="modal-header "  style="background-color: #007BFF;color:#fff;" >Nuevo Doctor</header>
    
        <form action="{% url 'crear_doctor' %}" method="POST">
            {% csrf_token %}

            <div class="modal-body" style=" height: 350px; width: 100%; overflow-y: auto;">
                {{ form.as_p }}
            </div>
            <div class="d-flex justify-content-center">
                <button class="btn btn-outline-primary btn-flat"  type="submit"><i class=" fas fa-save "></i> Guardar</button>
                &nbsp;
                <button class="btn btn-outline-danger btn-flat" type="button" data-dismiss="modal"><i class="fas fa-times"></i> Cancelar</button>
            </div>
            <br>
        </form>      
    </div>

</div>

<script>
    $(function(){
        var url = $("form");
        var token = jQuery("[name=csrfmiddlewaretoken]").val();

        $("form").submit(function(e){
            e.preventDefault();
            //alert("bjchbjd");
            var formData = $("form").serializeArray();
            $.ajax({
                url:url,
                method:"POST",
                headers:{'X-CSRFToken':token},
                data:formData
            })
            .done(function(r,textStatus,xhr){
                if(xhr.status=200){
                    location.reload(true);
                }
                else{
                    mensaje(textStatus);
                }
            }).fail(function(error){
                mensaje(error.responseText);
            });
        });
    });
</script> 